<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <!-- Cookie Consent Tracking Script - Loads only if accepted -->
    <script>
        // Check cookie consent before loading tracking scripts
        function loadTrackingScripts() {
            // Microsoft Clarity
            (function(c,l,a,r,i,t,y){
                c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
            })(window, document, "clarity", "script", "u8mm3iltgx");

            // Google Analytics
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-KYXTYFHPB3');
        }

        // Check if user has already given consent
        function checkCookieConsent() {
            const consent = getCookie('iceMen_cookie_consent');
            if (consent === 'accepted') {
                loadTrackingScripts();
                return true;
            }
            return false;
        }

        // Get cookie value
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Set cookie
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = `expires=${date.toUTCString()}`;
            document.cookie = `${name}=${value}; ${expires}; path=/; SameSite=Lax`;
        }

        // Initialize cookie consent check
        document.addEventListener('DOMContentLoaded', function() {
            if (!checkCookieConsent()) {
                // Show cookie banner if no consent given
                setTimeout(() => {
                    document.getElementById('cookieConsentBanner').classList.add('active');
                }, 1000);
            }
        });
    </script>

    <!-- Google tag (gtag.js) - Load only if cookies accepted -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KYXTYFHPB3"></script>
    
    <!-- SEO Meta Tags -->
    <title>Ice Men Quality Ice Supply | Premium Ice Order in Bethlehem, Free State</title>
    <meta name="description" content="Ice Men provides premium quality ice with reliable order service throughout Bethlehem and the Free State, South Africa. Order bulk ice for events, businesses, and personal use.">
    <meta name="keywords" content="ice order, ice supply, bulk ice, ice supplier Bethlehem, Free State ice delivery, premium ice, quality ice, ice for events, commercial ice, ice men">
    <meta name="author" content="Ice Men Quality Ice Supply">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Ice Men Quality Ice Supply | Premium Ice Order">
    <meta property="og:description" content="Providing premium quality ice with reliable order service throughout Bethlehem and the Free State, South Africa.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.icemengroup.com">
    <meta property="og:image" content="https://www.icemengroup.com/logo1.png">
    <meta property="og:locale" content="en_ZA">
    
    <!-- Local Business Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Ice Men Quality Ice Supply",
      "image": "https://www.icemengroup.com/logo1.png",
      "description": "Premium quality ice supplier with reliable order service in Bethlehem and the Free State, South Africa.",
      "@id": "https://www.icemengroup.com",
      "url": "https://www.icemengroup.com",
      "telephone": "+27672939603",
      "email": "icemengroup@gmail.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "496 Mlangeni St, Old Location, Bethlehem",
        "addressLocality": "Bethlehem",
        "addressRegion": "Free State",
        "postalCode": "9701",
        "addressCountry": "ZA"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": -28.2314,
        "longitude": 28.3067
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday"
        ],
        "opens": "08:00",
        "closes": "17:00"
      },
      "priceRange": "$$",
      "areaServed": {
        "@type": "GeoCircle",
        "geoMidpoint": {
          "@type": "GeoCoordinates",
          "latitude": -28.2314,
          "longitude": 28.3067
        },
        "geoRadius": "100000"
      }
    }
    </script>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.icemengroup.com">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #0f4286;
            --light-blue: #e8f0fe;
            --success-green: #28a745;
            --error-red: #dc3545;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            color: #333333;
            padding-top: 70px;
            background-color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            margin: 0;
        }
        
        /* Cookie Consent Banner Styles */
        .cookie-consent-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 20px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            transform: translateY(100%);
            transition: transform 0.4s ease-in-out;
            border-top: 3px solid var(--primary-blue);
        }
        
        .cookie-consent-banner.active {
            transform: translateY(0);
        }
        
        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .cookie-text {
            flex: 1;
            color: #333;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .cookie-text strong {
            color: var(--primary-blue);
            font-weight: 600;
        }
        
        .cookie-actions {
            display: flex;
            gap: 10px;
            flex-shrink: 0;
        }
        
        .cookie-btn {
            padding: 10px 20px;
            border-radius: 6px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .cookie-btn.accept {
            background-color: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }
        
        .cookie-btn.accept:hover {
            background-color: #0d376c;
            border-color: #0d376c;
            transform: translateY(-2px);
        }
        
        .cookie-btn.reject {
            background-color: transparent;
            color: #666;
            border-color: #ddd;
        }
        
        .cookie-btn.reject:hover {
            background-color: #f8f9fa;
            border-color: #ccc;
        }
        
        .cookie-link {
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 600;
        }
        
        .cookie-link:hover {
            text-decoration: underline;
        }

        /* Header Styles */
        .navbar {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            padding: 8px 0;
            height: 70px;
            z-index: 1001;
        }
        
        .navbar-brand img {
            height: 60px;
            width: auto;
            transform: scale(1.2);
            transform-origin: left center;
        }
        
        .menu-btn {
            background: none;
            border: 2px solid #000;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
            color: #000000;
        }
        
        .menu-btn:hover {
            background-color: var(--primary-blue);
            border-color: var(--primary-blue);
            color: white;
        }
        
        .nav-menu {
            position: fixed;
            top: 110px;
            right: 40px;
            background-color: rgba(255, 255, 255, 0.98);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            list-style: none;
            display: none;
            flex-direction: column;
            gap: 12px;
            backdrop-filter: blur(10px);
            min-width: 200px;
            z-index: 1000;
        }
        
        .nav-menu.active {
            display: flex;
        }
        
        .nav-link {
            text-decoration: none;
            color: #000000 !important;
            font-weight: 500;
            font-size: 16px;
            transition: all 0.3s ease;
            padding: 12px 18px;
            border-radius: 6px;
            display: block;
            -webkit-tap-highlight-color: transparent;
        }
        
        .nav-link:hover {
            background-color: var(--primary-blue);
            color: white !important;
            transform: translateX(5px);
        }
        
        .cart-icon {
            position: relative;
            font-size: 20px;
            color: #333333;
            transition: all 0.3s ease;
            padding: 8px;
            border-radius: 6px;
            margin-right: 15px;
        }
        
        .cart-icon:hover {
            color: var(--primary-blue);
            background-color: var(--light-blue);
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--primary-blue);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        /* Main Content Styles with Video Background */
        .main-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            height: calc(100vh - 70px);
            min-height: 500px;
        }
        
        .video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }
        
        .content-overlay {
            position: relative;
            z-index: 1;
            text-align: center;
            width: 100%;
        }
        
        .centered-list {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: center;
        }
        
        .centered-list li {
            margin-bottom: 25px;
            font-size: 1.2rem;
            font-weight: 500;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px 20px;
            border-radius: 8px;
        }
        
        .centered-list li:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(15, 66, 134, 0.5);
        }
        
        .centered-list li:last-child {
            margin-bottom: 0;
        }
        
        .list-number {
            color: white;
            font-weight: 600;
            width: 35px;
            text-align: right;
            display: inline-block;
        }
        
        .list-text-wrapper {
            display: inline-block;
            text-align: left;
            width: 150px;
            margin-left: 15px;
        }
        
        .list-text {
            display: inline;
            color: white;
        }
        
        .blue-dot {
            color: var(--primary-blue);
            font-weight: 700;
            display: inline;
        }
        
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .order-modal {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: 25px 25px 15px;
            border-bottom: none;
            position: relative;
            text-align: center;
        }

        .modal-logo {
            text-align: center;
            margin-bottom: 10px;
        }

        .modal-logo img {
            height: 50px;
            width: auto;
        }

        .modal-subtitle {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            margin: 0;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            color: #999;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: var(--primary-blue);
        }

        .modal-body {
            padding: 0 25px 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
        }

        .form-label .required {
            color: var(--error-red);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(15, 66, 134, 0.1);
        }

        .form-control.error {
            border-color: var(--error-red);
        }

        .error-message {
            color: var(--error-red);
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }

        .location-group {
            position: relative;
        }

        .location-input-group {
            display: flex;
            gap: 10px;
        }

        .location-input-group .form-control {
            flex: 1;
        }

        .location-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            white-space: nowrap;
        }

        .location-btn:hover {
            background: #0d376c;
        }

        .location-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .address-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .address-suggestion {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s ease;
        }

        .address-suggestion:hover {
            background-color: var(--light-blue);
        }

        .address-suggestion:last-child {
            border-bottom: none;
        }

        .quantity-section {
            text-align: center;
            margin: 25px 0;
        }

        .quantity-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quantity-btn {
            width: 45px;
            height: 45px;
            border: 2px solid var(--primary-blue);
            background: white;
            color: var(--primary-blue);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: var(--primary-blue);
            color: white;
        }

        .quantity-btn:disabled {
            border-color: #ccc;
            color: #ccc;
            cursor: not-allowed;
        }

        .quantity-btn:disabled:hover {
            background: white;
            color: #ccc;
        }

        .quantity-display {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-blue);
            min-width: 50px;
            text-align: center;
        }

        .price-display {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            text-align: center;
        }

        .price-breakdown {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .price-row.total {
            border-top: 1px solid #dee2e6;
            padding-top: 12px;
            margin-top: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary-blue);
        }

        .location-warning {
            color: var(--error-red);
            font-size: 0.8rem;
            text-align: center;
            margin: 10px 0;
            display: none;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .cancel-btn {
            flex: 1;
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }

        .cancel-btn:hover {
            background: #e9ecef;
            border-color: #ccc;
        }

        .submit-btn {
            flex: 2;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 16px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }

        .submit-btn:hover {
            background: #0d376c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(15, 66, 134, 0.3);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Delivery/Pickup Modal Styles */
        .delivery-modal {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 450px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        .delivery-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 25px 0;
        }

        .delivery-option {
            display: flex;
            align-items: center;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .delivery-option:hover {
            border-color: var(--primary-blue);
            background-color: var(--light-blue);
        }

        .delivery-option.selected {
            border-color: var(--primary-blue);
            background-color: var(--light-blue);
        }

        .option-icon {
            font-size: 24px;
            margin-right: 15px;
            color: var(--primary-blue);
        }

        .option-content {
            flex: 1;
        }

        .option-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .option-description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .option-price {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .option-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            position: relative;
            margin-left: 10px;
        }

        .option-radio::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: var(--primary-blue);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .delivery-option.selected .option-radio::after {
            opacity: 1;
        }

        .earlier-delivery-notice {
            background: #fff8e1;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
            text-align: center;
        }

        .earlier-delivery-notice i {
            color: #ffc107;
            margin-right: 10px;
            font-size: 20px;
        }

        .earlier-delivery-notice span {
            color: #333;
            font-weight: 500;
        }

        /* Status Modal Styles */
        .status-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 3000;
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }

        .status-modal.active {
            display: flex;
        }

        .status-modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        .status-icon {
            font-size: 60px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 80px;
        }

        .status-icon.success {
            color: var(--success-green);
        }

        .status-icon.error {
            color: var(--error-red);
        }

        .status-icon.location {
            color: var(--primary-blue);
        }

        .checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 2;
            stroke: var(--success-green);
            stroke-miterlimit: 10;
            margin: 0 auto;
            box-shadow: inset 0px 0px 0px var(--success-green);
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
        }

        .checkmark-circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke-miterlimit: 10;
            stroke: var(--success-green);
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }

        .checkmark-check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }

        @keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }

        @keyframes scale {
            0%, 100% {
                transform: none;
            }
            50% {
                transform: scale3d(1.1, 1.1, 1);
            }
        }

        @keyframes fill {
            100% {
                box-shadow: inset 0px 0px 0px 30px var(--success-green);
            }
        }

        .x-mark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 2;
            stroke: var(--error-red);
            stroke-miterlimit: 10;
            margin: 0 auto;
            position: relative;
        }

        .x-mark-circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke-miterlimit: 10;
            stroke: var(--error-red);
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }

        .x-mark-line {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }

        .status-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #333;
        }

        .status-message {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .continue-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }

        .continue-btn:hover {
            background: #0d376c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(15, 66, 134, 0.3);
        }

        /* Extended Footer Styles */
        .footer-divider {
            width: 100%;
            height: 1px;
            background-color: #e0e0e0;
            margin: 0;
        }
        
        .footer {
            background-color: white;
            padding: 60px 0 20px;
            text-align: left;
        }
        
        .footer-logo img {
            height: 60px;
            width: auto;
            margin-bottom: 20px;
        }
        
        .footer-heading {
            font-size: 18px;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
            font-weight: 600;
            color: #333;
        }
        
        .footer-heading::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 2px;
            background-color: var(--primary-blue);
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: #666;
            text-decoration: none;
            transition: color 0.3s ease;
            font-weight: 500;
            position: relative;
            padding-bottom: 2px;
            cursor: pointer;
        }
        
        .footer-links a:hover {
            color: var(--primary-blue);
        }
        
        .footer-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--primary-blue);
            transition: width 0.3s ease;
        }
        
        .footer-links a:hover::after {
            width: 100%;
        }
        
        .contact-info {
            list-style: none;
            padding: 0;
        }
        
        .contact-info li {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            color: #666;
        }
        
        .contact-info i {
            margin-right: 10px;
            margin-top: 3px;
            color: var(--primary-blue);
        }
        
        .footer-bottom {
            border-top: 1px solid #e0e0e0;
            padding-top: 20px;
            text-align: center;
            color: #666;
            font-weight: 500;
            margin-top: 40px;
        }
        
        .footer-bottom p {
            margin-bottom: 10px;
            color: #666;
        }
        
        .footer-bottom a {
            color: #666;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .footer-bottom a:hover {
            color: var(--primary-blue);
            text-decoration: underline;
        }

        /* WhatsApp Icon Styles */
        .whatsapp-float {
            position: fixed;
            width: 60px;
            height: 60px;
            bottom: 25px;
            right: 25px;
            background-color: #25d366;
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }
        
        .whatsapp-float:hover {
            background-color: #128c7e;
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3);
        }
        
        .whatsapp-float:active {
            transform: scale(0.95);
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(37, 211, 102, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
            }
        }
        
        /* WhatsApp Tooltip */
        .whatsapp-tooltip {
            position: absolute;
            right: 70px;
            bottom: 20px;
            background-color: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            white-space: nowrap;
            opacity: 0;
            transform: translateX(10px);
            transition: all 0.3s ease;
            pointer-events: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .whatsapp-tooltip::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -5px;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
            border-left: 5px solid #333;
        }
        
        .whatsapp-float:hover .whatsapp-tooltip {
            opacity: 1;
            transform: translateX(0);
        }

        /* Small Order Notification Modal Styles */
        .notification-modal {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 450px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        .notification-icon {
            font-size: 50px;
            color: var(--primary-blue);
            margin-bottom: 20px;
        }

        .notification-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #333;
        }

        .notification-message {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .notification-location {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .notification-location h4 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--primary-blue);
        }

        .notification-location p {
            margin: 0;
            color: #666;
            line-height: 1.5;
        }

        .notification-payment-info {
            background: #fff8e1;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: left;
            border-left: 4px solid #ffc107;
        }

        .notification-payment-info h4 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--primary-blue);
        }

        .notification-payment-info p {
            margin: 0;
            color: #666;
            line-height: 1.5;
        }

        .notification-payment-info ul {
            margin: 10px 0 0 0;
            padding-left: 20px;
            color: #666;
        }

        .notification-payment-info li {
            margin-bottom: 5px;
        }

        .notification-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .proceed-btn {
            flex: 1;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }

        .proceed-btn:hover {
            background: #0d376c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(15, 66, 134, 0.3);
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            body {
                padding-top: 60px;
            }
            
            .navbar {
                height: 60px;
            }
            
            .navbar-brand img {
                height: 50px;
                transform: scale(1.1);
            }
            
            .nav-menu {
                top: 90px;
                right: 20px;
            }
            
            .main-content {
                height: calc(100vh - 60px);
            }
            
            .centered-list li {
                font-size: 1.1rem;
            }

            .order-modal {
                width: 95%;
                margin: 20px;
            }

            .modal-body {
                padding: 0 20px 20px;
            }

            .location-input-group {
                flex-direction: column;
            }

            .location-btn {
                padding: 12px;
            }

            .form-actions {
                flex-direction: column;
            }

            .delivery-modal {
                width: 95%;
            }

            .delivery-option {
                padding: 15px;
            }

            .status-modal-content {
                padding: 30px 20px;
            }

            .status-icon {
                font-size: 50px;
                height: 70px;
            }

            .checkmark, .x-mark {
                width: 70px;
                height: 70px;
            }
            
            /* Cookie banner responsive */
            .cookie-content {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .cookie-actions {
                width: 100%;
                justify-content: center;
            }
            
            .cookie-btn {
                flex: 1;
                max-width: 150px;
            }
            
            /* WhatsApp icon responsive */
            .whatsapp-float {
                width: 55px;
                height: 55px;
                bottom: 20px;
                right: 20px;
                font-size: 28px;
            }
            
            .whatsapp-tooltip {
                font-size: 12px;
                padding: 6px 10px;
                right: 65px;
            }

            .notification-modal {
                padding: 25px 20px;
            }

            .notification-actions {
                flex-direction: column;
            }
        }
        
        @media (max-width: 576px) {
            .navbar-brand img {
                height: 45px;
                transform: scale(1);
            }
            
            .nav-menu {
                top: 85px;
                right: 15px;
                left: 15px;
                min-width: auto;
            }
            
            .centered-list li {
                font-size: 1rem;
            }
            
            .list-number {
                width: 30px;
            }
            
            .list-text-wrapper {
                width: 120px;
                margin-left: 12px;
            }
            
            .footer {
                padding: 40px 0 20px;
            }

            .quantity-group {
                gap: 15px;
            }

            .quantity-btn {
                width: 40px;
                height: 40px;
            }
            
            /* Cookie banner responsive */
            .cookie-consent-banner {
                padding: 15px;
            }
            
            .cookie-text {
                font-size: 13px;
            }
            
            .cookie-actions {
                flex-direction: column;
                width: 100%;
            }
            
            .cookie-btn {
                max-width: none;
                width: 100%;
            }
            
            /* WhatsApp icon responsive */
            .whatsapp-float {
                width: 50px;
                height: 50px;
                bottom: 15px;
                right: 15px;
                font-size: 26px;
            }
            
            .whatsapp-tooltip {
                display: none; /* Hide tooltip on very small screens */
            }
        }
    </style>
</head>
<body>
    <!-- Cookie Consent Banner -->
    <div class="cookie-consent-banner" id="cookieConsentBanner">
        <div class="cookie-content">
            <div class="cookie-text">
                <strong>We value your privacy</strong><br>
                We use cookies and similar technologies to enhance your browsing experience, analyze site traffic, and personalize content. By clicking "Accept All", you consent to our use of cookies. You can manage your preferences in your browser settings.
            </div>
            <div class="cookie-actions">
                <button class="cookie-btn reject" id="rejectCookies">Reject All</button>
                <button class="cookie-btn accept" id="acceptCookies">Accept All</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <nav class="navbar navbar-expand-lg fixed-top" role="navigation" aria-label="Main navigation">
            <div class="container">
                <a class="navbar-brand" href="/" aria-label="Ice Men Quality Ice Supply Home">
                    <img src="logo1.png" alt="Ice Men Quality Ice Supply Logo">
                </a>
                
                <div class="d-flex align-items-center">
                    <a href="#" class="cart-icon" aria-label="Shopping cart" id="cartIcon">
                        <i class="bi bi-cart"></i>
                        <span class="cart-badge" id="cartBadge">0</span>
                    </a>
                    <button class="menu-btn" id="menuToggle" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="navMenu">
                        Menu
                    </button>
                </div>
                
                <ul class="nav-menu" id="navMenu" role="menu">
                    <li role="none"><a class="nav-link" href="/" role="menuitem">ORDER<span class="blue-dot">.</span></a></li>
                    <li role="none"><a class="nav-link" href="product.html" role="menuitem">PRODUCTS<span class="blue-dot">.</span></a></li>
                    <li role="none"><a class="nav-link" href="about.html" role="menuitem">ABOUT US<span class="blue-dot">.</span></a></li>
                    <li role="none"><a class="nav-link" href="#contact" role="menuitem">CONTACT<span class="blue-dot">.</span></a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Main Content with Video Background -->
    <main class="main-content" id="home">
        <!-- Video Background -->
        <video class="video-background" autoplay muted loop playsinline preload="auto" aria-label="Employee serving ice to customer">
            <source src="vid/sec1.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        
        <div class="container content-overlay">
            <nav aria-label="Main sections">
                <ul class="centered-list">
                    <li id="buy-list-item">
                        <span class="list-number" aria-hidden="true">01</span>
                        <span class="list-text-wrapper">
                            <span class="list-text">ORDER<span class="blue-dot" aria-hidden="true">.</span></span>
                        </span>
                    </li>
                    <li id="products-list-item">
                        <span class="list-number" aria-hidden="true">02</span>
                        <span class="list-text-wrapper">
                            <span class="list-text">PRODUCTS<span class="blue-dot" aria-hidden="true">.</span></span>
                        </span>
                    </li>
                    <li id="about-list-item">
                        <span class="list-number" aria-hidden="true">03</span>
                        <span class="list-text-wrapper">
                            <span class="list-text">ABOUT US<span class="blue-dot" aria-hidden="true">.</span></span>
                        </span>
                    </li>
                    <li id="contact-list-item">
                        <span class="list-number" aria-hidden="true">04</span>
                        <span class="list-text-wrapper">
                            <span class="list-text">CONTACT<span class="blue-dot" aria-hidden="true">.</span></span>
                        </span>
                    </li>
                </ul>
            </nav>
        </div>
    </main>

    <!-- Order Modal -->
    <div class="modal-overlay" id="orderModal">
        <div class="order-modal">
            <div class="modal-header">
                <div class="modal-logo">
                    <img src="logofooter.png" alt="Ice Men Logo">
                </div>
                <p class="modal-subtitle">Fill in your details for ice delivery</p>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="orderForm">
                    <div class="form-group">
                        <label class="form-label" for="customerName">
                            Full Name <span class="required">*</span>
                        </label>
                        <input type="text" class="form-control" id="customerName" required>
                        <div class="error-message" id="nameError">Please enter your full name</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="customerEmail">
                            Email Address <span class="required">*</span>
                        </label>
                        <input type="email" class="form-control" id="customerEmail" placeholder="your.email@example.com" required>
                        <div class="error-message" id="emailError">Please enter a valid email address</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="customerPhone">
                            Phone Number <span class="required">*</span>
                        </label>
                        <input type="tel" class="form-control" id="customerPhone" required>
                        <div class="error-message" id="phoneError">Please enter a valid phone number</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="deliveryAddress">
                            Delivery Address <span class="required">*</span>
                        </label>
                        <div class="location-group">
                            <div class="location-input-group">
                                <input type="text" class="form-control" id="deliveryAddress" placeholder="Enter your address" required>
                                <button type="button" class="location-btn" id="getLocationBtn">
                                    <i class="bi bi-geo-alt"></i> Locate Me
                                </button>
                            </div>
                            <div class="address-suggestions" id="addressSuggestions"></div>
                            <div class="error-message" id="addressError">Please enter your delivery address</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="deliveryInstructions">
                            Delivery Instructions (Optional)
                        </label>
                        <textarea class="form-control" id="deliveryInstructions" placeholder="Any special delivery instructions..." rows="2"></textarea>
                    </div>

                    <!-- Earlier Delivery Notice -->
                    <div class="earlier-delivery-notice">
                        <i class="bi bi-lightning-charge"></i>
                        <span>Note: Requested quantity may be provided earlier if available in stock</span>
                    </div>

                    <div class="quantity-section">
                        <label class="form-label">Quantity (Ice Bags)</label>
                        <div class="quantity-group">
                            <div class="quantity-controls">
                                <button type="button" class="quantity-btn" id="decreaseBtn">-</button>
                                <span class="quantity-display" id="quantityDisplay">10</span>
                                <button type="button" class="quantity-btn" id="increaseBtn">+</button>
                            </div>
                        </div>
                        <div class="price-display" id="icePrice">R 80.00</div>
                        <small style="color: #666;">Minimum order: 10 bags</small>
                    </div>

                    <!-- Price Breakdown -->
                    <div class="price-breakdown">
                        <div class="price-row">
                            <span>Ice Bags (10  R8.00):</span>
                            <span id="subtotalPrice">R 80.00</span>
                        </div>
                        <div class="price-row delivery-fee-row">
                            <span>Delivery Fee:</span>
                            <span id="deliveryFee">R 15.00</span>
                        </div>
                        <div class="price-row total">
                            <span>Total Amount:</span>
                            <span id="totalPrice">R 95.00</span>
                        </div>
                    </div>

                    <div class="location-warning" id="locationWarning">
                         We currently only deliver to Bethlehem, Free State 
                    </div>
                    
                    <div style="background-color: #e8f0fe; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
                        <i class="bi bi-info-circle" style="color: var(--primary-blue); margin-right: 8px;"></i>
                        <span style="color: var(--primary-blue); font-weight: 500;">Payment upon delivery: EFT or Cash accepted</span>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="cancel-btn" id="cancelBtn">
                            Cancel
                        </button>
                        <button type="submit" class="submit-btn" id="submitOrder">
                            Place Order
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delivery/Pickup Modal -->
    <div class="modal-overlay" id="deliveryModal">
        <div class="delivery-modal">
            <div class="modal-header">
                <div class="modal-logo">
                    <img src="logofooter.png" alt="Ice Men Logo">
                </div>
                <p class="modal-subtitle">Choose your delivery method</p>
                <button class="close-modal" id="closeDeliveryModal">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="delivery-options">
                    <div class="delivery-option" data-type="delivery" id="deliveryOption">
                        <div class="option-icon">
                            <i class="bi bi-truck"></i>
                        </div>
                        <div class="option-content">
                            <div class="option-title">Home Delivery</div>
                            <div class="option-description">We deliver directly to your address in Bethlehem</div>
                            <div class="option-price">+ R 15.00 delivery fee</div>
                        </div>
                        <div class="option-radio"></div>
                    </div>
                    
                    <div class="delivery-option" data-type="pickup" id="pickupOption">
                        <div class="option-icon">
                            <i class="bi bi-shop"></i>
                        </div>
                        <div class="option-content">
                            <div class="option-title">Store Pickup</div>
                            <div class="option-description">Pick up from our store with no delivery fee</div>
                            <div class="option-price">Free pickup</div>
                        </div>
                        <div class="option-radio"></div>
                    </div>
                </div>

                <!-- Earlier Delivery Notice -->
                <div class="earlier-delivery-notice">
                    <i class="bi bi-lightning-charge"></i>
                    <span>Note: Requested quantity may be provided earlier if available in stock</span>
                </div>

                <div class="form-actions">
                    <button type="button" class="cancel-btn" id="cancelDeliveryBtn">
                        Back
                    </button>
                    <button type="button" class="submit-btn" id="confirmDeliveryBtn">
                        Continue
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Small Order Notification Modal -->
    <div class="modal-overlay" id="notificationModal">
        <div class="notification-modal">
            <div class="notification-icon">
                <i class="bi bi-info-circle"></i>
            </div>
            <h2 class="notification-title">Important Notice</h2>
            <p class="notification-message">
                For orders below 10 units, we recommend visiting our store directly for faster service and no delivery fees.
            </p>
            
            <div class="notification-location">
                <h4>Our Store Location</h4>
                <p>
                    <strong>Ice Men Quality Ice Supply</strong><br>
                    496 Mlangeni St, Old Location<br>
                    Bethlehem, 9701<br>
                    Free State, South Africa
                </p>
            </div>

            <div class="notification-payment-info">
                <h4>Payment Information</h4>
                <p>All payments are completed upon delivery:</p>
                <ul>
                    <li> EFT (Electronic Funds Transfer) accepted</li>
                    <li> Cash payments accepted</li>
                    <li> Delivery arrives in 2 days (may be earlier if available)</li>
                </ul>
            </div>

            <div class="notification-actions">
                <button class="proceed-btn" id="proceedBtn">
                    Order Now 
                </button>
            </div>
        </div>
    </div>

    <!-- Status Modal -->
    <div class="status-modal" id="statusModal">
        <div class="status-modal-content">
            <div class="status-icon" id="statusIcon">
                <!-- Success icon will be inserted here -->
            </div>
            <h2 class="status-title" id="statusTitle">Success!</h2>
            <p class="status-message" id="statusMessage">Your order has been placed successfully.</p>
            <button class="continue-btn" id="continueBtn">Continue</button>
        </div>
    </div>

    <!-- WhatsApp Icon -->
    <a href="https://wa.me/27681653614?text=Hi%20Ice%20Men%2C%20I%20would%20like%20to%20inquire%20about%20your%20ice%20products" 
       class="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="Chat with us on WhatsApp">
        <i class="bi bi-whatsapp"></i>
        <span class="whatsapp-tooltip">Chat with us on WhatsApp</span>
    </a>

    <!-- Footer Divider -->
    <div class="footer-divider"></div>

    <!-- Extended Footer -->
    <footer class="footer" id="contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="footer-logo">
                        <img src="logofooter.png" alt="Ice Men Quality Ice Supply Footer Logo">
                    </div>
                    <p style="color: #666;">Providing premium quality ice with reliable delivery service throughout the Free State.</p>
                </div>
                
                <div class="col-lg-4 mb-4">
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" id="footerOrderLink">Order</a></li>
                        <li><a href="product.html">Products</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-4 mb-4">
                    <h3 class="footer-heading">Contact Us</h3>
                    <ul class="contact-info">
                        <li>
                            <i class="bi bi-geo-alt" aria-hidden="true"></i>
                            <span>496 Mlangeni St, Old Location, Bethlehem, 9701</span>
                        </li>
                        <li>
                            <i class="bi bi-telephone" aria-hidden="true"></i>
                            <a href="tel:+27681653614" style="color: #666; text-decoration: none;">068 165 3614</a>
                        </li>
                        <li>
                            <i class="bi bi-envelope" aria-hidden="true"></i>
                            <a href="mailto:icemengroupfs@gmail.com" style="color: #666; text-decoration: none;">icemengroupfs@gmail.com</a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Ice Men Quality Ice Supply. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
 <script>
    // Constants - UPDATED WITH LATEST GOOGLE SHEETS URL AND NEW PRICE
    const ICE_PRICE_PER_BAG = 8.00; // Updated from 7.00 to 8.00
    const DELIVERY_FEE = 15.00;
    const MIN_QUANTITY = 10;
    const GOOGLE_SHEET_URL = 'https://script.google.com/macros/s/AKfycbwd8juhd2QyCd0ElkyxMMKw4GYOV21a0hJYUl8mMuG65FQKuTopYcjN9BW-Suu7oKuDKA/exec';
    const SMS_SERVER_URL = 'https://icemenserver.onrender.com';
    const BETHLEHEM_POSTAL_CODES = ['9700', '9701', '9702'];
    const BETHLEHEM_KEYWORDS = ['bethlehem', 'free state'];

    // State
    let currentQuantity = MIN_QUANTITY;
    let sessionId = '';
    let isLocationValid = false;
    let orderNumber = '';
    let deliveryType = 'delivery'; // 'delivery' or 'pickup'

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        initializeSession();
        loadCartFromStorage();
        initializeEventListeners();
        updatePriceDisplay();
        updateCartDisplay();
        initializeCookieConsent();
        initializeDeliveryOptions();
    });

    function initializeCookieConsent() {
        // Add event listeners for cookie buttons
        document.getElementById('acceptCookies').addEventListener('click', function() {
            setCookie('iceMen_cookie_consent', 'accepted', 365);
            document.getElementById('cookieConsentBanner').classList.remove('active');
            loadTrackingScripts(); // Load tracking scripts after acceptance
        });

        document.getElementById('rejectCookies').addEventListener('click', function() {
            setCookie('iceMen_cookie_consent', 'rejected', 30);
            document.getElementById('cookieConsentBanner').classList.remove('active');
            // Don't load tracking scripts
        });
    }

    function initializeDeliveryOptions() {
        // Initialize delivery options
        document.getElementById('deliveryOption').addEventListener('click', function() {
            selectDeliveryOption('delivery');
        });
        
        document.getElementById('pickupOption').addEventListener('click', function() {
            selectDeliveryOption('pickup');
        });
        
        // Default selection
        selectDeliveryOption('delivery');
    }

    function selectDeliveryOption(type) {
        deliveryType = type;
        
        // Remove selected class from all options
        document.getElementById('deliveryOption').classList.remove('selected');
        document.getElementById('pickupOption').classList.remove('selected');
        
        // Add selected class to chosen option
        if (type === 'delivery') {
            document.getElementById('deliveryOption').classList.add('selected');
        } else {
            document.getElementById('pickupOption').classList.add('selected');
        }
        
        // Update price display if order modal is open
        updatePriceDisplay();
    }

    function initializeSession() {
        // Generate or retrieve session ID
        sessionId = localStorage.getItem('iceMenSessionId');
        if (!sessionId) {
            sessionId = 'ice_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('iceMenSessionId', sessionId);
        }
    }

    function loadCartFromStorage() {
        const cartData = localStorage.getItem(`iceMenCart_${sessionId}`);
        if (cartData) {
            const cart = JSON.parse(cartData);
            currentQuantity = cart.quantity || MIN_QUANTITY;
            updateQuantityDisplay();
        } else {
            // No cart data, set to minimum
            currentQuantity = MIN_QUANTITY;
            updateQuantityDisplay();
        }
    }

    function saveCartToStorage() {
        const cartData = {
            quantity: currentQuantity,
            timestamp: Date.now()
        };
        localStorage.setItem(`iceMenCart_${sessionId}`, JSON.stringify(cartData));
    }

    function clearCart() {
        currentQuantity = MIN_QUANTITY;
        localStorage.removeItem(`iceMenCart_${sessionId}`);
        updateCartDisplay();
        updateQuantityDisplay();
        updatePriceDisplay();
    }

    function resetForm() {
        document.getElementById('orderForm').reset();
        clearCart();
        document.getElementById('locationWarning').style.display = 'none';
        isLocationValid = false;
        // Reset to default delivery type
        selectDeliveryOption('delivery');
    }

    function initializeEventListeners() {
        // Menu toggle
        document.getElementById('menuToggle').addEventListener('click', function(e) {
            e.preventDefault();
            const isExpanded = document.getElementById('navMenu').classList.contains('active');
            document.getElementById('navMenu').classList.toggle('active');
            document.getElementById('menuToggle').setAttribute('aria-expanded', !isExpanded);
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            const menuToggle = document.getElementById('menuToggle');
            const navMenu = document.getElementById('navMenu');
            if (!menuToggle.contains(e.target) && !navMenu.contains(e.target)) {
                navMenu.classList.remove('active');
                menuToggle.setAttribute('aria-expanded', 'false');
            }
        });

        // Navigation functionality for menu items
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Close menu
                document.getElementById('navMenu').classList.remove('active');
                document.getElementById('menuToggle').setAttribute('aria-expanded', 'false');
                
                // Get the href attribute
                const href = this.getAttribute('href');
                
                // Handle different navigation cases
                if (href === '/') {
                    // "Order" link - show notification modal first
                    document.getElementById('notificationModal').classList.add('active');
                    document.body.style.overflow = 'hidden';
                } else if (href === 'product.html') {
                    // Navigate to products page
                    window.location.href = 'product.html';
                } else if (href === 'about.html') {
                    // Navigate to about page
                    window.location.href = 'about.html';
                } else if (href === '#contact') {
                    // Scroll to contact section
                    const contactSection = document.getElementById('contact');
                    if (contactSection) {
                        contactSection.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });

        // Order button - show notification modal first
        document.getElementById('buy-list-item').addEventListener('click', function() {
            document.getElementById('notificationModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        // Footer Order link
        document.getElementById('footerOrderLink').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('notificationModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        // Close modals - FIXED: Use document.getElementById directly
        document.getElementById('closeModal').addEventListener('click', closeOrderModal);
        document.getElementById('orderModal').addEventListener('click', function(e) {
            if (e.target === document.getElementById('orderModal')) {
                closeOrderModal();
            }
        });

        // FIXED: Use getElementById directly instead of storing in variable
        document.getElementById('closeDeliveryModal').addEventListener('click', closeDeliveryModal);
        document.getElementById('deliveryModal').addEventListener('click', function(e) {
            if (e.target === document.getElementById('deliveryModal')) {
                closeDeliveryModal();
            }
        });

        document.getElementById('notificationModal').addEventListener('click', function(e) {
            if (e.target === document.getElementById('notificationModal')) {
                closeNotificationModal();
            }
        });

        // Proceed button in notification modal
        document.getElementById('proceedBtn').addEventListener('click', function() {
            closeNotificationModal();
            document.getElementById('deliveryModal').classList.add('active');
        });

        // Cancel button in order modal
        document.getElementById('cancelBtn').addEventListener('click', function() {
            resetForm();
            closeOrderModal();
        });

        // Cancel button in delivery modal
        document.getElementById('cancelDeliveryBtn').addEventListener('click', function() {
            closeDeliveryModal();
        });

        // Confirm delivery button
        document.getElementById('confirmDeliveryBtn').addEventListener('click', function() {
            closeDeliveryModal();
            document.getElementById('orderModal').classList.add('active');
        });

        // Quantity controls
        document.getElementById('decreaseBtn').addEventListener('click', decreaseQuantity);
        document.getElementById('increaseBtn').addEventListener('click', increaseQuantity);

        // Location detection
        document.getElementById('getLocationBtn').addEventListener('click', getCurrentLocation);

        // Address input with autocomplete
        const deliveryAddress = document.getElementById('deliveryAddress');
        const addressSuggestions = document.getElementById('addressSuggestions');
        
        deliveryAddress.addEventListener('input', debounce(handleAddressInput, 500));
        deliveryAddress.addEventListener('focus', function() {
            if (deliveryAddress.value.length >= 3) {
                handleAddressInput();
            }
        });

        // Close suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!deliveryAddress.contains(e.target) && !addressSuggestions.contains(e.target)) {
                addressSuggestions.style.display = 'none';
            }
        });

        // Form submission
        document.getElementById('orderForm').addEventListener('submit', handleOrderSubmission);

        // Cart icon
        document.getElementById('cartIcon').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('notificationModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        // Validate address on input
        deliveryAddress.addEventListener('blur', function() {
            if (this.value.trim()) {
                validateLocation(this.value);
            }
        });

        // Continue button in status modal
        document.getElementById('continueBtn').addEventListener('click', function() {
            document.getElementById('statusModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        });

        // Navigation for other list items
        const productsListItem = document.getElementById('products-list-item');
        const aboutListItem = document.getElementById('about-list-item');
        const contactListItem = document.getElementById('contact-list-item');

        if (productsListItem) {
            productsListItem.addEventListener('click', function() {
                window.location.href = 'product.html';
            });
        }

        if (aboutListItem) {
            aboutListItem.addEventListener('click', function() {
                window.location.href = 'about.html';
            });
        }

        if (contactListItem) {
            contactListItem.addEventListener('click', function() {
                const contactSection = document.getElementById('contact');
                if (contactSection) {
                    contactSection.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        }
    }

    function closeOrderModal() {
        document.getElementById('orderModal').classList.remove('active');
        document.body.style.overflow = 'auto';
        saveCartToStorage();
    }

    function closeDeliveryModal() {
        document.getElementById('deliveryModal').classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    function closeNotificationModal() {
        document.getElementById('notificationModal').classList.remove('active');
        document.body.style.overflow = 'auto';
    }

    function decreaseQuantity() {
        if (currentQuantity > MIN_QUANTITY) {
            currentQuantity--;
            updateQuantityDisplay();
            updatePriceDisplay();
            updateCartDisplay();
            saveCartToStorage();
        }
    }

    function increaseQuantity() {
        currentQuantity++;
        updateQuantityDisplay();
        updatePriceDisplay();
        updateCartDisplay();
        saveCartToStorage();
    }

    function updateQuantityDisplay() {
        document.getElementById('quantityDisplay').textContent = currentQuantity;
        document.getElementById('decreaseBtn').disabled = currentQuantity <= MIN_QUANTITY;
    }

    function updatePriceDisplay() {
        const subtotal = currentQuantity * ICE_PRICE_PER_BAG;
        const deliveryFee = deliveryType === 'delivery' ? DELIVERY_FEE : 0;
        const total = subtotal + deliveryFee;

        document.getElementById('icePrice').textContent = `R ${subtotal.toFixed(2)}`;
        document.getElementById('subtotalPrice').textContent = `R ${subtotal.toFixed(2)}`;
        document.getElementById('deliveryFee').textContent = deliveryFee === 0 ? 'Free' : `R ${deliveryFee.toFixed(2)}`;
        document.getElementById('totalPrice').textContent = `R ${total.toFixed(2)}`;
        
        // Update price breakdown text
        document.querySelector('.price-row:first-child span:first-child').textContent = 
            `Ice Bags (${currentQuantity}  R${ICE_PRICE_PER_BAG.toFixed(2)}):`;
        
        // Show/hide delivery address field based on delivery type
        const addressField = document.querySelector('[for="deliveryAddress"]');
        const addressInput = document.getElementById('deliveryAddress');
        const locationGroup = document.querySelector('.location-group');
        
        if (deliveryType === 'pickup') {
            addressField.textContent = 'Pickup Address (Store Location)';
            addressInput.value = 'Ice Men Quality Ice Supply, 496 Mlangeni St, Old Location, Bethlehem, 9701';
            addressInput.readOnly = true;
            locationGroup.style.display = 'none';
        } else {
            addressField.textContent = 'Delivery Address *';
            addressInput.value = '';
            addressInput.readOnly = false;
            locationGroup.style.display = 'block';
        }
    }

    function updateCartDisplay() {
        document.getElementById('cartBadge').textContent = currentQuantity > MIN_QUANTITY ? currentQuantity : '0';
    }

    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }

    async function handleAddressInput() {
        const deliveryAddress = document.getElementById('deliveryAddress');
        const query = deliveryAddress.value.trim();
        if (query.length < 3 || deliveryType === 'pickup') {
            document.getElementById('addressSuggestions').style.display = 'none';
            return;
        }

        try {
            const response = await fetch(
                `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query + ', Bethlehem, Free State')}&countrycodes=za&limit=5`
            );
            
            if (!response.ok) {
                throw new Error('Failed to fetch address suggestions');
            }
            
            const data = await response.json();
            displayAddressSuggestions(data);
            
        } catch (error) {
            console.error('Error fetching address suggestions:', error);
            document.getElementById('addressSuggestions').style.display = 'none';
        }
    }

    function displayAddressSuggestions(addresses) {
        const addressSuggestions = document.getElementById('addressSuggestions');
        if (addresses.length === 0 || deliveryType === 'pickup') {
            addressSuggestions.style.display = 'none';
            return;
        }

        addressSuggestions.innerHTML = '';
        addresses.forEach(address => {
            const suggestion = document.createElement('div');
            suggestion.className = 'address-suggestion';
            suggestion.textContent = address.display_name;
            suggestion.addEventListener('click', function() {
                document.getElementById('deliveryAddress').value = address.display_name;
                addressSuggestions.style.display = 'none';
                validateLocation(address.display_name);
            });
            addressSuggestions.appendChild(suggestion);
        });
        
        addressSuggestions.style.display = 'block';
    }

    function validateLocation(address) {
        // Skip validation for pickup orders
        if (deliveryType === 'pickup') {
            isLocationValid = true;
            document.getElementById('locationWarning').style.display = 'none';
            document.getElementById('submitOrder').disabled = false;
            return true;
        }
        
        const addressLower = address.toLowerCase();
        
        // Check for Bethlehem keywords
        const hasBethlehem = BETHLEHEM_KEYWORDS.some(keyword => 
            addressLower.includes(keyword.toLowerCase())
        );
        
        // Check for postal codes
        const hasPostalCode = BETHLEHEM_POSTAL_CODES.some(code => 
            addressLower.includes(code)
        );

        isLocationValid = hasBethlehem || hasPostalCode;
        
        if (isLocationValid) {
            document.getElementById('locationWarning').style.display = 'none';
            document.getElementById('submitOrder').disabled = false;
        } else {
            document.getElementById('locationWarning').style.display = 'block';
            document.getElementById('submitOrder').disabled = true;
        }
        
        return isLocationValid;
    }

    function getCurrentLocation() {
        if (!navigator.geolocation || deliveryType === 'pickup') {
            showStatusModal('Geolocation is not supported by your browser', false, 'location');
            return;
        }

        const getLocationBtn = document.getElementById('getLocationBtn');
        getLocationBtn.disabled = true;
        getLocationBtn.innerHTML = '<div class="loading-spinner"></div> Locating...';

        navigator.geolocation.getCurrentPosition(
            async (position) => {
                try {
                    const { latitude, longitude } = position.coords;
                    
                    const response = await fetch(
                        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`
                    );
                    
                    if (!response.ok) {
                        throw new Error('Failed to fetch location data');
                    }
                    
                    const data = await response.json();
                    
                    if (data.display_name) {
                        document.getElementById('deliveryAddress').value = data.display_name;
                        validateLocation(data.display_name);
                        showStatusModal('Location detected successfully!', true, 'location');
                    } else {
                        throw new Error('No address found for this location');
                    }
                    
                } catch (error) {
                    console.error('Error getting location:', error);
                    showStatusModal('Could not determine your address. Please enter it manually.', false, 'error');
                } finally {
                    getLocationBtn.disabled = false;
                    getLocationBtn.innerHTML = '<i class="bi bi-geo-alt"></i> Locate Me';
                }
            },
            (error) => {
                console.error('Error getting position:', error);
                let errorMessage = 'Location access denied. ';
                
                switch (error.code) {
                    case error.PERMISSION_DENIED:
                        errorMessage += 'Please enable location permissions in your browser settings.';
                        break;
                    case error.POSITION_UNAVAILABLE:
                        errorMessage += 'Location information is unavailable.';
                        break;
                    case error.TIMEOUT:
                        errorMessage += 'Location request timed out.';
                        break;
                    default:
                        errorMessage += 'An unknown error occurred.';
                }
                
                showStatusModal(errorMessage, false, 'error');
                getLocationBtn.disabled = false;
                getLocationBtn.innerHTML = '<i class="bi bi-geo-alt"></i> Locate Me';
            },
            { 
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 60000
            }
        );
    }

    function validateForm() {
        let isValid = true;
        const name = document.getElementById('customerName').value.trim();
        const email = document.getElementById('customerEmail').value.trim();
        const phone = document.getElementById('customerPhone').value.trim();
        const address = document.getElementById('deliveryAddress').value.trim();

        // Reset errors
        document.querySelectorAll('.error-message').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.form-control').forEach(el => el.classList.remove('error'));

        // Validate name
        if (!name) {
            document.getElementById('nameError').style.display = 'block';
            document.getElementById('customerName').classList.add('error');
            isValid = false;
        }

        // Validate email (now required)
        if (!email || !isValidEmail(email)) {
            document.getElementById('emailError').style.display = 'block';
            document.getElementById('customerEmail').classList.add('error');
            isValid = false;
        }

        // Validate phone (South African format)
        const phoneRegex = /^(\+27|0)[6-8][0-9]{8}$/;
        const cleanPhone = phone.replace(/\s/g, '');
        if (!phone || !phoneRegex.test(cleanPhone)) {
            document.getElementById('phoneError').style.display = 'block';
            document.getElementById('customerPhone').classList.add('error');
            isValid = false;
        }

        // Validate address
        if (!address) {
            document.getElementById('addressError').style.display = 'block';
            document.getElementById('deliveryAddress').classList.add('error');
            isValid = false;
        }

        // Validate location (only for delivery)
        if (deliveryType === 'delivery' && !validateLocation(address)) {
            document.getElementById('locationWarning').style.display = 'block';
            isValid = false;
        }

        return isValid;
    }

    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    async function handleOrderSubmission(e) {
        e.preventDefault();
        
        if (!validateForm()) {
            return;
        }

        const orderData = {
            name: document.getElementById('customerName').value.trim(),
            email: document.getElementById('customerEmail').value.trim(),
            phone: document.getElementById('customerPhone').value.trim(),
            address: document.getElementById('deliveryAddress').value.trim(),
            instructions: document.getElementById('deliveryInstructions').value.trim(),
            quantity: currentQuantity,
            deliveryType: deliveryType,
            subtotal: currentQuantity * ICE_PRICE_PER_BAG,
            deliveryFee: deliveryType === 'delivery' ? DELIVERY_FEE : 0,
            total: (currentQuantity * ICE_PRICE_PER_BAG) + (deliveryType === 'delivery' ? DELIVERY_FEE : 0)
        };

        const submitOrderBtn = document.getElementById('submitOrder');
        submitOrderBtn.disabled = true;
        submitOrderBtn.innerHTML = '<div class="loading-spinner"></div> Processing...';

        try {
            // Generate order number first
            orderNumber = 'ICE-' + Date.now() + '-' + Math.random().toString(36).substr(2, 5).toUpperCase();
            
            // Prepare SMS message with payment information and delivery type
            const deliveryMethod = orderData.deliveryType === 'delivery' ? 'DELIVERY' : 'STORE PICKUP';
            const deliveryInfo = orderData.deliveryType === 'delivery' ? 
                `Delivery Address: ${orderData.address}` : 
                'Pickup at store: 496 Mlangeni St, Old Location, Bethlehem';
            
            const smsMessage = `NEW ICE ORDER #${orderNumber}\n${orderData.quantity} bags\n${deliveryMethod}\n${deliveryInfo}\nSubtotal: R ${orderData.subtotal.toFixed(2)}\nDelivery Fee: R ${orderData.deliveryFee.toFixed(2)}\nTotal: R ${orderData.total.toFixed(2)}\nCustomer: ${orderData.name}\nPhone: ${orderData.phone}${orderData.instructions ? '\nInstructions: ' + orderData.instructions : ''}\n\nPAYMENT UPON ${orderData.deliveryType === 'delivery' ? 'DELIVERY' : 'PICKUP'} (EFT/CASH)\nDELIVERY IN 2 DAYS (MAY BE EARLIER IF AVAILABLE)`;

            // Add timeout to SMS fetch - increased to 60 seconds for Render cold starts
            const smsController = new AbortController();
            const smsTimeoutId = setTimeout(() => smsController.abort(), 60000);

            // Send SMS to delivery guy FIRST
            const smsResponse = await fetch(`${SMS_SERVER_URL}/send-sms`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    to: '+27672939603',
                    message: smsMessage
                }),
                signal: smsController.signal
            });

            clearTimeout(smsTimeoutId);

            const smsResult = await smsResponse.json();

            if (smsResult.success) {
                // Try to save to Google Sheets with improved error handling
                try {
                    // Create form data to avoid CORS preflight
                    const formData = new URLSearchParams();
                    formData.append('name', orderData.name);
                    formData.append('email', orderData.email);
                    formData.append('phone', orderData.phone);
                    formData.append('quantity', orderData.quantity);
                    formData.append('address', orderData.address);
                    formData.append('instructions', orderData.instructions);
                    formData.append('deliveryType', orderData.deliveryType);
                    formData.append('orderStatus', 'Pending - Delivery in 2 days (may be earlier)');
                    formData.append('orderId', orderNumber);

                    // Add timeout to Sheets fetch as well
                    const sheetsController = new AbortController();
                    const sheetsTimeoutId = setTimeout(() => sheetsController.abort(), 10000); // 10-second timeout

                    const sheetResponse = await fetch(GOOGLE_SHEET_URL, {
                        method: 'POST',
                        body: formData,
                        signal: sheetsController.signal
                    });

                    clearTimeout(sheetsTimeoutId);

                    // Try to parse response, but don't fail if it doesn't work
                    try {
                        const sheetResult = await sheetResponse.json();
                        console.log('Google Sheets response:', sheetResult);
                    } catch (parseError) {
                        console.log('Google Sheets data saved (response not parseable)');
                    }
                    
                } catch (sheetError) {
                    console.warn('Google Sheets save had issues, but order was placed:', sheetError);
                    // Continue with order success even if sheets has issues
                }

                const successMessage = deliveryType === 'delivery' ?
                    `Order #${orderNumber} placed successfully! Your ice will be delivered in 2 days (may be earlier if available). Payment upon delivery (EFT/Cash).` :
                    `Order #${orderNumber} placed successfully! Please pickup from our store in 2 days (may be earlier if available). Payment upon pickup (EFT/Cash).`;
                
                showStatusModal(successMessage, true, 'success');
                document.getElementById('orderForm').reset();
                clearCart();
                document.getElementById('locationWarning').style.display = 'none';
                isLocationValid = false;
                
                // Close order modal after success
                closeOrderModal();
            } else {
                throw new Error('SMS failed: ' + smsResult.error);
            }
        } catch (error) {
            console.error('Error placing order:', error);
            let errorMsg = 'Failed to place order. Please try again or call us directly.';
            if (error.name === 'AbortError') {
                errorMsg = 'Service timeout. Please try again.';
            }
            showStatusModal(errorMsg, false, 'error');
        } finally {
            document.getElementById('submitOrder').disabled = false;
            document.getElementById('submitOrder').textContent = 'Place Order';
        }
    }

    function showStatusModal(message, isSuccess, type) {
        // Set the icon based on type and success
        const statusIcon = document.getElementById('statusIcon');
        statusIcon.innerHTML = '';
        
        if (type === 'success') {
            statusIcon.className = 'status-icon success';
            statusIcon.innerHTML = `
                <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
            `;
            document.getElementById('statusTitle').textContent = 'Success!';
        } else if (type === 'error') {
            statusIcon.className = 'status-icon error';
            statusIcon.innerHTML = `
                <svg class="x-mark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="x-mark-circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="x-mark-line" fill="none" d="M16 16l20 20M36 16L16 36"/>
                </svg>
            `;
            document.getElementById('statusTitle').textContent = 'Error';
        } else if (type === 'location') {
            statusIcon.className = 'status-icon location';
            statusIcon.innerHTML = '<i class="bi bi-geo-alt-fill"></i>';
            document.getElementById('statusTitle').textContent = isSuccess ? 'Location Found' : 'Location Error';
        }
        
        document.getElementById('statusMessage').textContent = message;
        document.getElementById('statusModal').classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Cookie management functions
    function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = `expires=${date.toUTCString()}`;
        document.cookie = `${name}=${value}; ${expires}; path=/; SameSite=Lax`;
    }

    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

    // Ensure video plays correctly
    const video = document.querySelector('.video-background');
    if (video) {
        video.play().catch(function(error) {
            console.log("Video autoplay failed:", error);
        });
    }
</script>
</body>
</html>